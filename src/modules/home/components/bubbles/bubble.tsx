import { useGSAP } from '@gsap/react';
import gsap from 'gsap';
import React, { useEffect, useRef } from 'react';
import './bubble.css';
export const Bubble = ({ style, y, x, maxScale }: { style?: string; y?: number; x?: number; maxScale?: number }) => {
  const randomX = () => {
    return Math.random() * (x || 205) - (x ? Math.round(x / 2) : 100);
  };
  const randomY = () => {
    return Math.random() * (y || 300) + (y ? 0 : 260);
  };
  const randomScale = () => {
    return Math.random() * (maxScale ? maxScale : 3) - 1;
  };
  const randomXHover = () => {
    return Math.random() * 100 - 50;
  };
  const randomYHover = () => {
    return Math.random() * 100 + 100;
  };
  const randomScaleHover = () => {
    return Math.random() * 2 - 0.5;
  };

  const ref = useRef(null);
  useEffect(() => {
    const ctx = gsap.context(() => {
      const bubbles = gsap.utils.toArray('.bubble');
      const anim = () =>
        bubbles.forEach((b: any, i: any) => {
          if (style === 'onHover') {
            return gsap.fromTo(
              b,
              {
                x: 0,
                y: 0,
                opacity: 1,
                scale: 0.4
              },
              {
                x: randomXHover(),
                y: -randomYHover(),
                scale: randomScaleHover(),
                opacity: 0,
                duration: 0.5,
                delay: i - 0.5
              }
            );
          }
          return gsap.fromTo(
            b,
            {
              x: randomX(),
              y: 0,
              opacity: 0,
              scale: 0.4
            },
            {
              x: randomX(),
              y: -randomY(),
              scale: randomScale(),
              opacity: 1,
              duration: 4,
              delay: i - 0.5
            }
          );
        });
      var timer = setInterval(
        () => {
          anim();
        },
        style === 'quick' ? 1000 : 3000
      );
      anim();
      return () => {
        clearInterval(timer);
      };
    }, ref);
    return () => {
      ctx.revert();
    };
  }, []);
  return (
    <div className={style === 'onHover' ? 'bubbles onHover' : 'bubbles'} ref={ref}>
      <div className='bubble 1'>
        <svg xmlns='http://www.w3.org/2000/svg' width='56' height='56' viewBox='0 0 56 56' fill='none'>
          <path
            d='M24.5215 0.932069C26.8003 0.32146 29.1997 0.32146 31.4785 0.932069L38.5215 2.81922C40.8003 3.42983 42.8782 4.62953 44.5465 6.29775L49.7023 11.4535C51.3705 13.1218 52.5702 15.1997 53.1808 17.4785L55.0679 24.5215C55.6785 26.8003 55.6785 29.1997 55.0679 31.4785L53.1808 38.5215C52.5702 40.8003 51.3705 42.8782 49.7023 44.5465L44.5465 49.7023C42.8782 51.3705 40.8003 52.5702 38.5215 53.1808L31.4785 55.0679C29.1997 55.6785 26.8003 55.6785 24.5215 55.0679L17.4785 53.1808C15.1997 52.5702 13.1218 51.3705 11.4535 49.7023L6.29775 44.5465C4.62953 42.8782 3.42983 40.8003 2.81922 38.5215L0.932069 31.4785C0.32146 29.1997 0.32146 26.8003 0.932069 24.5215L2.81922 17.4785C3.42983 15.1997 4.62953 13.1218 6.29775 11.4535L11.4535 6.29775C13.1218 4.62953 15.1997 3.42983 17.4785 2.81922L24.5215 0.932069Z'
            fill='white'
            fill-opacity='0.2'
          />
          <path
            d='M40.9206 13.0239C39.1592 11.57 36.0024 9.42986 34.4064 10.7686C33.5324 11.5018 34.6819 12.0489 36.5624 13.6299C38.4429 15.211 39.5646 16.9192 41.2817 19.6081C42.9987 22.297 45.2631 20.6543 45.3892 18.8654C45.5153 17.0764 42.6821 14.4778 40.9206 13.0239Z'
            fill='white'
            fill-opacity='0.7'
          />
        </svg>
      </div>
      <div className='bubble 2'>
        <svg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50' fill='none'>
          <path
            d='M16.5147 8.48528C21.201 3.79899 28.799 3.79899 33.4853 8.48528L41.5147 16.5147C46.201 21.201 46.201 28.799 41.5147 33.4853L33.4853 41.5147C28.799 46.201 21.201 46.201 16.5147 41.5147L8.48528 33.4853C3.79899 28.799 3.79899 21.201 8.48528 16.5147L16.5147 8.48528Z'
            fill='white'
            fill-opacity='0.2'
          />
          <path
            d='M35.535 14.0326C34.6201 13.3847 32.8978 12.521 31.5969 13.6315C30.8844 14.2397 31.5529 14.4058 32.5244 15.116C33.496 15.8262 33.9396 16.7389 34.6054 18.1832C35.2712 19.6276 37.0713 18.2161 37.4733 17.0526C37.8752 15.889 36.4499 14.6806 35.535 14.0326Z'
            fill='white'
            fill-opacity='0.7'
          />
        </svg>
      </div>
      <div className='bubble 3'>
        <svg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50' fill='none'>
          <path
            d='M16.5147 8.48528C21.201 3.79899 28.799 3.79899 33.4853 8.48528L41.5147 16.5147C46.201 21.201 46.201 28.799 41.5147 33.4853L33.4853 41.5147C28.799 46.201 21.201 46.201 16.5147 41.5147L8.48528 33.4853C3.79899 28.799 3.79899 21.201 8.48528 16.5147L16.5147 8.48528Z'
            fill='white'
            fill-opacity='0.2'
          />
          <path
            d='M35.535 14.0326C34.6201 13.3847 32.8978 12.521 31.5969 13.6315C30.8844 14.2397 31.5529 14.4058 32.5244 15.116C33.496 15.8262 33.9396 16.7389 34.6054 18.1832C35.2712 19.6276 37.0713 18.2161 37.4733 17.0526C37.8752 15.889 36.4499 14.6806 35.535 14.0326Z'
            fill='white'
            fill-opacity='0.7'
          />
        </svg>
      </div>
      <div className='bubble 4'>
        <svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64' fill='none'>
          <path
            d='M28.0245 1.06522C30.6289 0.367382 33.3711 0.367382 35.9755 1.06522L44.0245 3.22197C46.6289 3.91981 49.0037 5.29089 50.9102 7.19743L56.8026 13.0898C58.7091 14.9963 60.0802 17.3711 60.778 19.9755L62.9348 28.0245C63.6326 30.6289 63.6326 33.3711 62.9348 35.9755L60.778 44.0245C60.0802 46.6289 58.7091 49.0037 56.8026 50.9102L50.9102 56.8026C49.0037 58.7091 46.6289 60.0802 44.0245 60.778L35.9755 62.9348C33.3711 63.6326 30.6289 63.6326 28.0245 62.9348L19.9755 60.778C17.3711 60.0802 14.9963 58.7091 13.0898 56.8026L7.19743 50.9102C5.2909 49.0037 3.91981 46.6289 3.22197 44.0245L1.06522 35.9755C0.367382 33.3711 0.367382 30.6289 1.06522 28.0245L3.22197 19.9755C3.91981 17.3711 5.29089 14.9963 7.19743 13.0898L13.0898 7.19743C14.9963 5.2909 17.3711 3.91981 19.9755 3.22197L28.0245 1.06522Z'
            fill='white'
            fill-opacity='0.2'
          />
          <path
            d='M46.7662 14.8845C44.7531 13.2229 41.1454 10.777 39.3214 12.307C38.3225 13.1449 39.6362 13.7701 41.7854 15.5771C43.9346 17.384 45.2165 19.3362 47.1788 22.4092C49.1412 25.4823 51.729 23.605 51.8732 21.5604C52.0173 19.5159 48.7793 16.546 46.7662 14.8845Z'
            fill='white'
            fill-opacity='0.7'
          />
        </svg>
      </div>
      <div className='bubble 5'>
        <svg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50' fill='none'>
          <path
            d='M19.7934 2.50737C23.0836 0.922868 26.9164 0.922871 30.2066 2.50737L39.3392 6.90539C42.6294 8.48989 45.0191 11.4864 45.8317 15.0468L48.0873 24.929C48.8999 28.4894 48.047 32.226 45.7701 35.0811L39.4502 43.0061C37.1733 45.8613 33.7201 47.5242 30.0682 47.5242H19.9318C16.2799 47.5242 12.8267 45.8613 10.5498 43.0061L4.22988 35.0811C1.95296 32.226 1.1001 28.4894 1.91273 24.929L4.16829 15.0468C4.98091 11.4864 7.37057 8.48988 10.6608 6.90539L19.7934 2.50737Z'
            fill='white'
            fill-opacity='0.2'
          />
          <path
            d='M35.101 11.7549C33.4104 10.6155 30.4241 8.98391 29.1411 10.2943C28.4385 11.0119 29.5042 11.4012 31.3118 12.6431C33.1195 13.8851 34.2694 15.3008 36.0366 17.5332C37.8038 19.7656 39.6481 18.1329 39.5917 16.5447C39.5354 14.9565 36.7917 12.8943 35.101 11.7549Z'
            fill='white'
            fill-opacity='0.7'
          />
        </svg>
      </div>
      <div className='bubble 6'>
        <svg xmlns='http://www.w3.org/2000/svg' width='51' height='50' viewBox='0 0 51 50' fill='none'>
          <path
            d='M17.2647 8.48528C21.951 3.79899 29.549 3.79899 34.2353 8.48528L42.2647 16.5147C46.951 21.201 46.951 28.799 42.2647 33.4853L34.2353 41.5147C29.549 46.201 21.951 46.201 17.2647 41.5147L9.23528 33.4853C4.54899 28.799 4.54899 21.201 9.23528 16.5147L17.2647 8.48528Z'
            fill='white'
            fill-opacity='0.2'
          />
          <path
            d='M36.285 14.0326C35.3701 13.3847 33.6478 12.521 32.3469 13.6315C31.6344 14.2397 32.3029 14.4058 33.2744 15.116C34.246 15.8262 34.6896 16.7389 35.3554 18.1832C36.0212 19.6276 37.8213 18.2161 38.2233 17.0526C38.6252 15.889 37.1999 14.6806 36.285 14.0326Z'
            fill='white'
            fill-opacity='0.7'
          />
        </svg>
        <div className='bubble 6'>
          <svg xmlns='http://www.w3.org/2000/svg' width='51' height='50' viewBox='0 0 51 50' fill='none'>
            <path
              d='M17.2647 8.48528C21.951 3.79899 29.549 3.79899 34.2353 8.48528L42.2647 16.5147C46.951 21.201 46.951 28.799 42.2647 33.4853L34.2353 41.5147C29.549 46.201 21.951 46.201 17.2647 41.5147L9.23528 33.4853C4.54899 28.799 4.54899 21.201 9.23528 16.5147L17.2647 8.48528Z'
              fill='white'
              fill-opacity='0.2'
            />
            <path
              d='M36.285 14.0326C35.3701 13.3847 33.6478 12.521 32.3469 13.6315C31.6344 14.2397 32.3029 14.4058 33.2744 15.116C34.246 15.8262 34.6896 16.7389 35.3554 18.1832C36.0212 19.6276 37.8213 18.2161 38.2233 17.0526C38.6252 15.889 37.1999 14.6806 36.285 14.0326Z'
              fill='white'
              fill-opacity='0.7'
            />
          </svg>
        </div>{' '}
        <div className='bubble 6'>
          <svg xmlns='http://www.w3.org/2000/svg' width='51' height='50' viewBox='0 0 51 50' fill='none'>
            <path
              d='M17.2647 8.48528C21.951 3.79899 29.549 3.79899 34.2353 8.48528L42.2647 16.5147C46.951 21.201 46.951 28.799 42.2647 33.4853L34.2353 41.5147C29.549 46.201 21.951 46.201 17.2647 41.5147L9.23528 33.4853C4.54899 28.799 4.54899 21.201 9.23528 16.5147L17.2647 8.48528Z'
              fill='white'
              fill-opacity='0.2'
            />
            <path
              d='M36.285 14.0326C35.3701 13.3847 33.6478 12.521 32.3469 13.6315C31.6344 14.2397 32.3029 14.4058 33.2744 15.116C34.246 15.8262 34.6896 16.7389 35.3554 18.1832C36.0212 19.6276 37.8213 18.2161 38.2233 17.0526C38.6252 15.889 37.1999 14.6806 36.285 14.0326Z'
              fill='white'
              fill-opacity='0.7'
            />
          </svg>
        </div>{' '}
        <div className='bubble 6'>
          <svg xmlns='http://www.w3.org/2000/svg' width='51' height='50' viewBox='0 0 51 50' fill='none'>
            <path
              d='M17.2647 8.48528C21.951 3.79899 29.549 3.79899 34.2353 8.48528L42.2647 16.5147C46.951 21.201 46.951 28.799 42.2647 33.4853L34.2353 41.5147C29.549 46.201 21.951 46.201 17.2647 41.5147L9.23528 33.4853C4.54899 28.799 4.54899 21.201 9.23528 16.5147L17.2647 8.48528Z'
              fill='white'
              fill-opacity='0.2'
            />
            <path
              d='M36.285 14.0326C35.3701 13.3847 33.6478 12.521 32.3469 13.6315C31.6344 14.2397 32.3029 14.4058 33.2744 15.116C34.246 15.8262 34.6896 16.7389 35.3554 18.1832C36.0212 19.6276 37.8213 18.2161 38.2233 17.0526C38.6252 15.889 37.1999 14.6806 36.285 14.0326Z'
              fill='white'
              fill-opacity='0.7'
            />
          </svg>
        </div>
      </div>
    </div>
  );
};
